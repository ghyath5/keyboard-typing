<!doctype html>

<html>
<head>
	
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Nogat</title>
<link rel="shortcut icon" href="img/images.jpg">
<link rel="stylesheet" href="css/bootstrap.min.css" type="text/css" />
<link rel="stylesheet" href="css/stylef.css">
<script type="text/javascript" src="js/jquery.min.js"></script>
<script type="text/javascript" src="js/bootstrap.min.js"></script>
<script src="/socket.io/socket.io.js"></script>
</head>

<body id="body">

<nav class="navbar navbar-inverse">
  <div class="container-fluid">
    <div class="navbar-header">
      <a class="navbar-brand" href="#"><div id="dlogo"><span id="logo">Nog</span>at</div></a>
    </div>
    <ul class="nav navbar-nav">
      <li class="active"><a href="#">Home</a></li>
      <li><a href="#" id="addyour">Add your words</a></li>
      <li>
      	<select id="select">
	     <option value="url(img/a1.jpg)">background-1</option>
	     <option value="url(img/a.gif)">background-2</option>
	     <option value="url(img/d.gif)">background-3</option>
	     <option value="url(img/e.gif)">background-4</option>
	     <option value="url(img/j.gif)">background-5</option>
	     <option value="url(img/y.gif)">background-6</option>
	     <option value="url(img/o.gif)">background-7</option>
	     <option value="url(img/p.gif)">background-8</option>
	     <option value="url(img/q.gif)">background-9</option>
	     <option value="url(img/s.gif)">background-10</option>
	     <option value="url(img/t.gif)">background-11</option>
	     <option value="url(img/u.gif)">background-12</option>
	     <option value="url(img/v.gif)">background-13</option>
	     <option value="url(img/y.gif)">background-14</option>
	     <option value="url(img/1.gif)">background-15</option>
	     <option value="url(img/2.gif)">background-16</option>
	     <option value="url(img/3.gif)">background-17</option>
	     <option value="url(img/4.gif)">background-18</option>
	     <option value="url(img/5.gif)">background-19</option>
	     <option value="url(img/6.gif)">background-20</option>
	     <option value="url(img/7.gif)">background-21</option>
	     <option value="url(img/8.gif)">background-22</option>
	     <option value="url(img/9.gif)">background-23</option>
	     <option value="url(img/10.gif)">background-24</option>
	     <option value="url(img/11.gif)">background-25</option>
	     <option value="url(img/12.gif)">background-26</option>
	     <option value="url(img/13.gif)">background-27</option>
	     <option value="url(img/14.gif)">background-28</option>
	     <option value="url(img/15.gif)">background-29</option>
	     <option value="url(img/16.gif)">background-30</option>
	     <option value="url(img/17.gif)">background-31</option>
	     <option value="url(img/18.gif)">background-32</option>
	     <option value="blue">blue</option>
	     <option value="white">white</option>
	     <option value="black">black</option>
	     <option value="yellow">yellow</option>
	     <option value="green">green</option>
	     <option value="aqua">aqua</option>
	     <option value="azure">azure</option>
	     <option value="blueviolet">blueviolet</option>
	     <option value="brown">brown</option>
	     <option value="burlywood">burlywood</option>
	     <option value="cadetblue">cadetblue</option>
	     <option value="cornflowerblue">cornflowerblue</option>
	     <option value="deeppink">deeppink</option>
	     <option value="dimgrey">dimgrey</option>
	     <option value="khaki">khaki</option>
  	  </select>
	</li>
    </ul>
    <div class="pull-right" id="online"></div>
  </div>

</nav>

<script>
	var select = document.getElementById("select");
	
	select.onchange = function(){
		var color ={
		'white':'black',
		'black':'white',
		'red'  :'white',
		'blue' :'black',
		'yellow':'black',
		'aqua':'white',
		'green':'white'
	}
		var backg = select.value;
		
		
		$("nav.navbar").css("opacity","1");
		document.body.style.background = backg;

	}
	
</script>
<!------------------- contact us ---->
<div class="container addwords">
	<textarea id="textarea" placeholder="add your words"></textarea>
	<button id="restwords" class="btn-block btn btn-primary">REST</button>
	
</div>

  <div id="hon">
	<div id="words">

	<!--this is words place;-->
	
	</div>

	<form id="form">
		<div id="whiletype"></div>
		<input type="text" id="input" class="enter" autocomplete="off" spellcheck="false">
		<button id="res" class="sos btn btn-primary" title="Restart">RE(F5)</button>	    	
    	<span class="time"><span id="timer" style="font-size: 20px">1:00</span></span>	
	</form>
	
 </div>



<div id="score" class="col-xs-12 col-sm-6">

	<p class="text read green text-center">WPM:(<span class="score"></span>)</p>
	<hr />
	<p class="text read">Correct words:<span class="score green"></span></p>
	<hr />
	<p class="text read">Wrong words:<span class="score red"></span></p>
	<hr />
	<p class="text read">Keystrokes: <span class="score"></span> <span class="chare"></span>|<span class="chare green"></span>|<span class="chare red"></span></p>
</div>


<!---------------------------------------------------------------------------------------->
<script>
var socket = io();
	// JavaScript Document
socket.on('ref',function(user){
    $("#online").html(user+" users online");
});

$("#addyour").on('click',function(){
	$(".addwords").toggle(100);
	$("#textarea").focus();
});

var input	  = document.getElementById('input'),
	container = document.getElementById('words'),
    timer	  = document.getElementById('timer'),
    words     = document.getElementsByClassName('span'),
    score_list= document.getElementById('score'),
	score     = document.getElementsByClassName('score'),
	chare     = document.getElementsByClassName('chare');
	
var word_match = 0;

var typing=0;
var interval;
//set your words from server 
var timer_start = true;
var option  = 3;
var move =option;

socket.on('connect',function(){
socket.on("res while typing",function(res){
	var resull = Math.floor(Math.round(res));
	if(resull>=40){
		$("#whiletype").html("<span class='green'>"+resull+"</span>");
	    $(words[typing-1]).append("<span class='green result_while'>"+resull+"</span>");
	}else if(resull<=25){
		$("#whiletype").html("<span class='red'>"+resull+"</span>");
	    $(words[typing-1]).append("<span class='red result_while'>"+resull+"</span>");
	}else{
		$("#whiletype").html("<span>"+resull+"</span>");
	    $(words[typing-1]).append("<span class='result_while'>"+resull+"</span>");
	}
	
		
	
		
	
	
});
socket.emit('rest all');

$("body").on("click","#res",function(){
	$("#words").show();
	socket.emit('rest all');
	socket.emit('rest timer');
	word_match=0;
	typing    =0;
	input.removeAttribute('disabled');
	input.focus();
	input.value="";
	
	timer.textContent ="1:00";
	clearInterval(interval)//clear interval
	move =option;//for moveing
	timer_start = true;
	return false;
});
	
	socket.emit('rest timer');
	input.focus();	
});

socket.on('words',function(words){
	$(container).html("");
	for(var i=0;i<words.length;i++){
		var pattern = /[\u0600-\u06FF\u0750-\u077F]/;
		if(pattern.test(words[i])==true){
			$(container).append("<span class='span pull-right'>"+words[i]+"</span>");
		}else{
			$(container).append("<span class='span'>"+words[i]+"</span>");
	    }
	}
	
});

//words



input.addEventListener("keyup",function(event){

	var x = event.which || event.keyCode;
	
	if(timer_start && x!=116){
		timer_start = false;
		interval = setInterval(start_timer,1000);
		
	}

	
	
	if(x == 32 || x==13){
		if(input.value.trim() != ""){
			word_match++;
		   socket.emit('countenue',{"value":input.value,"item":typing});
			typing++;	
		}
	     input.value = "";
	}else{
		if(x == 8){
			socket.emit('typing',{"value":input.value,"item":typing,'del':true});
		}else{
			socket.emit('typing',{"value":input.value,"item":typing});
		}
		
	}
	
	

	for(var i=0;i<words.length;i++){
		$(words[i]).removeClass('read');
		if(i == word_match){
			$(words[i]).addClass('read');
		}
		if(word_match == move){
			for(var d=0;d<word_match-1;d++){
				$(words[d]).hide();
			}
			move+=option;
		}
		
	}
	
});


socket.on("result",function(res){
	if(res.leng <=typing){
		socket.emit('done');
	}
	if(res.res == 1){
	   $(words[res.items]).addClass('green');
	}if(res.res == 0){
	   $(words[res.items]).addClass('bred');
	}if(res.res == 3){
		$(words[res.items]).removeClass('green');
		$(words[res.items]).removeClass('bred');
	}if(res.res == 4){
		$(words[res.items]).addClass('red');
		$(words[res.items]).removeClass('bred');
	}
})
 
   

/*------------time down (timer)---------*/

function start_timer(){
	timer_start = false;
	socket.emit('timer start');
}

/*--time down start now--*/

socket.on('start now',function(val) {
    timer.textContent = "0:"+val;
});
	

socket.on('score',function(sc){
	timer_start = true;
	$("#words").hide();
	chare[0].innerHTML = sc.f;
	chare[1].innerHTML = sc.ch;
	chare[2].innerHTML = sc.f-sc.ch;
	
	score[0].innerHTML = Math.round(sc.Accuracy);
	score[1].innerHTML = sc.true;
	score[2].innerHTML = sc.false;

	$(score_list).slideDown(200);
	input.setAttribute('disabled','disabled');
	input.value = "";
	clearInterval(interval);
		
});



/*========*/
$("#textarea").on('keydown',function(eve){
	var x = eve.which||eve.keyCode;
	if(x ==13){
		var w = $("#textarea").val();
		$(".addwords").toggle(100);
		socket.emit('custom words',w);
		$("#res").click();
	}
})

$("#restwords").on('click',function(){
	socket.emit('restwords');
	$("#res").click();
});


/*---------refresh----------*/

document.addEventListener('keydown',function(e){
	var xa = e.which||e.keyCode;
	if(xa == 116){
		e.preventDefault();
		$("#res").click();
	}if(xa == 13){
		e.preventDefault();
	}
	
})

	
</script>
</body>
</html>