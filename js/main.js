function shuffle(e){for(var t,n,r=e.length;0!==r;)n=Math.floor(Math.random()*r),t=e[r-=1],e[r]=e[n],e[n]=t;return e}function restwords(){client.words=wo}function resttimer(){client.timer=59}function timerstart(){client.timer>=0?(startnow(client.timer),client.timer--,reswhiletyping(Accuracy=client.key/5/((59-client.timer)/60))):scores({true:client.trues,false:client.falses,Accuracy:Accuracy,ch:client.key,f:client.keyf})}function typings(e){client.words.length;var t=e.value.split("").length;e.del||(keydown=client.words[e.item].slice(0,t).trim().length),e.value.trim()==client.words[e.item].slice(0,t).trim()?(result({res:3,items:e.item}),scors=e.value.trim().split("").length+1):result({res:0,items:e.item})}function countenue(e,t){client.keyf+=keydown+1,e.trim()==client.words[t]?(client.key+=scors,result({res:1,items:t,leng:client.words.length}),client.trues++):(result({res:4,items:t,leng:client.words.length}),client.falses++),reswhilespace(Accuracy=client.key/5/((59-client.timer)/60))}function done(){scores({true:client.trues,false:client.falses,Accuracy:Accuracy,ch:client.key,f:client.keyf})}function reswhiletyping(e){var t=Math.floor(Math.round(e));$("#whiletype").html("<span>"+t+"</span>"),t>=40?$(".progress-bar").css({width:e+"%",background:"#68ab52"}):t<=25?$(".progress-bar").css({width:e+"%",background:"rgb(255, 76, 76)"}):$(".progress-bar").css({width:e+"%",background:"#c88d22"})}function reswhilespace(e){var t=Math.floor(Math.round(e));t>=40?$(words[typing]).append("<span class='green result_while'>"+t+"</span>"):t<=25?$(words[typing]).append("<span class='red result_while'>"+t+"</span>"):$(words[typing]).append("<span class='result_while'>"+t+"</span>")}function wordss(e){$(container).html("");for(var t=0;t<e.length;t++)1==/[\u0600-\u06FF\u0750-\u077F]/.test(e[t])?$(container).append("<span class='span pull-right'>"+e[t]+"</span>"):$(container).append("<span class='span'>"+e[t]+"</span>")}function customwords(e){var t=e.split(" ");client.words=t}function restall(){client.trues=0,client.falses=0,client.key=0,client.keyf=0,client.words=shuffle(client.words),wordss(client.words)}function result(e){1==e.res&&(sound&&(correct.currentTime=0,correct.play(),correct.volume=.2),$(words[e.items]).addClass("green")),0==e.res&&($(words[e.items]).addClass("bred"),sound&&keywrong.play()),3==e.res&&(sound&&writing.play(),$(words[e.items]).removeClass("green"),$(words[e.items]).removeClass("bred")),4==e.res&&(sound&&(wrong.currentTime=0,wrong.play()),$(words[e.items]).addClass("red"),$(words[e.items]).removeClass("bred"))}function roundToTwo(e){return+(Math.round(e+"e+2")+"e-2")}function start_timer(){timer_start=!1,timerstart()}function startnow(e){timer.textContent="0:"+e}function scores(e){$("#words").hide(),chare[0].innerHTML=e.f,chare[1].innerHTML=e.ch,chare[2].innerHTML=e.f-e.ch,score[0].innerHTML=Math.round(e.Accuracy),score[1].innerHTML=e.true,score[2].innerHTML=e.false,score[4].innerHTML=roundToTwo(e.ch/e.f*100)+"%",$(score_list).slideDown(200),input.setAttribute("disabled","disabled"),input.value="",clearInterval(interval),timer_start=!0}var socket=io();socket.on("ref",function(e){$("#online").html(e+" users online")});var clients={},Accuracy,scors,keydown,wo=["word","home","until","head","get","set","follow","sentence","font","because","world","oil","still","most","thing","this","our","slice","enter","key","come","also","second","next","idea","well","will","open","home","to","game","earth","test","try","fast","young","should","when","such","small","mother","country","picture","the","move","did","go","another","at","paper","want","begin","time","they","you","back","above","back","learn","group","down","question","here","add","put","again","mile","there","line","about","food","must","water","like","around","kind","point","went","came","kind","try","too","thing","was","what","city","father","turn","next","every","great","answer","spell","mother","know","start","word","find","has","each","they","state","happy","men","quick","arrive","number","study","need","above","only","use","example","show","later","quickly","that","it's","enough","write","very","Indian","thought","own","people","over","should","letter","for","school","long","still","quite","should"],client=clients[Math.random()]={words:wo,falses:0,trues:0,key:0,keyf:0}||{};$("#addyour").on("click",function(){$(".addwords").toggle(100),$("#textarea").focus()});var correct=new Audio("sounds/corrects.mp3"),wrong=new Audio("sounds/Wrong.mp3"),writing=new Audio("sounds/key.mp3"),keywrong=new Audio("sounds/falses.mp3"),input=document.getElementById("input"),container=document.getElementById("words"),timer=document.getElementById("timer"),words=document.getElementsByClassName("span"),score_list=document.getElementById("score"),score=document.getElementsByClassName("score"),chare=document.getElementsByClassName("chare"),word_match=0,typing=0,interval,timer_start=!0,option=3,move=option,sound=!0;$("#sound").change(function(){sound=!this.checked}),$("body").on("click","#res",function(){return $("#words").show(),restall(),resttimer(),word_match=0,typing=0,input.removeAttribute("disabled"),input.focus(),input.value="",timer.textContent="1:00",clearInterval(interval),move=option,timer_start=!0,!1}),$("#res").click(),resttimer(),input.focus(),input.addEventListener("keyup",function(e){var t=e.which||e.keyCode;timer_start&&116!=t&&(timer_start=!1,start_timer(),interval=setInterval(start_timer,1e3)),17==t&&($("#sound").is(":checked")?(sound=!0,$("#sound").prop("checked",!1)):(sound=!1,$("#sound").prop("checked",!0))),32==t||13==t?(""!=input.value.trim()&&(word_match++,countenue(input.value,typing),typing++,client.words.length==typing&&done()),input.value=""):typings(8==t?{value:input.value,item:typing,del:!0}:{value:input.value,item:typing});for(var n=0;n<words.length;n++)if($(words[n]).removeClass("read"),n==word_match&&$(words[n]).addClass("read"),word_match==move){for(var r=0;r<word_match-1;r++)$(words[r]).hide();move+=option}}),input.addEventListener("keyup",function(e){writing.currentTime=0}),$("#textarea").on("keydown",function(e){if(13==(e.which||e.keyCode)){var t=$("#textarea").val();$(".addwords").toggle(100),customwords(t),$("#res").click()}}),$("#restwords").on("click",function(){restwords(),$("#res").click()}),document.addEventListener("keydown",function(e){var t=e.which||e.keyCode;116==t&&(e.preventDefault(),$("#res").click()),13==t&&e.preventDefault()});